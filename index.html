<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Goodbye Warden</title>
  <meta name="description" content="Goodbye Warden - last words of Texas death row inmates.">
  <meta name="keywords" content="Goodbye Warden, death row, last words, Texas, executions, inmate statements, criminal justice">
  <meta name="author" content="Goodbye Warden">
  <meta name="robots" content="index, follow">

  <meta property="og:image" content="./goodbye_warden_link_preview.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="./goodbye_warden_link_preview.png">

  <!-- Open Graph / Facebook -->
  <meta property="og:title" content="Goodbye Warden">
  <meta property="og:description" content="Goodbye Warden shares the last words of executed Texas death row inmates.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://goodbyewarden.wttdotm.com/">
  <!-- <meta property="og:image" content="https://goodbyewarden.wttdotm.com/img/og-image.jpg"> -->

  <!-- Twitter Card -->
  <!-- <meta name="twitter:card" content="summary_large_image"> -->
  <meta name="twitter:title" content="Goodbye Warden">
  <meta name="twitter:description" content="Goodbye Warden shares the last words of executed Texas death row inmates.">
  <!-- <meta name="twitter:image" content="https://goodbyewarden.wttdotm.com/img/og-image.jpg"> -->
  <script src="all_words_with_statements.js"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link
    href="https://fonts.googleapis.com/css2?family=Fauna+One&family=Funnel+Sans:ital,wght@0,300..800;1,300..800&display=swap"
    rel="stylesheet">
    <style>
      /* Prevent double tap to zoom on mobile by disabling double-tap zoom */
      html, body {
        touch-action: manipulation;
      }
      input, textarea, select, button {
        touch-action: manipulation;
      }
    html, body {
        height: 100%;
        margin: 0;
    }
    body {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        background-color: #2B2C33;
        overflow-x: hidden;
        background-color: #2B2C33;
        color: #ffffff;
        font-family: 'Funnel Sans', 'Arial', sans-serif;
        overflow-x: hidden;
    }

    

    #content {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: space-between;
        height: 80%;
        /* max-height: 80%; */
        width: 80%;
        padding-bottom: 30px;
    }
    #statement {
        /* max-height: 80%; */
        /* overflow-y: auto; */
        font-size: 1.3rem;
        max-width: 100%;
        letter-spacing: 0.1px;
        line-height: 2rem;
    }

    #name {
        font-size: 1.2rem;
        max-width: 100%;
    }
    
    @keyframes fadeUpIn {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    .fade-up-in {
        animation: fadeUpIn 0.5s ease-out;
    }
    #landing {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        height: 100%;
        width: 90%;
        font-size: 1.2rem;
    }
    button {
        background-color: #2B2C33;
        color: #ffffff;
        border: 1px solid #ffffff;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-family: 'Funnel Sans', 'Arial', sans-serif;
        font-size: 1.2rem;
        transition: background-color 0.2s, transform 0.1s;
    }

    #buttons {
        margin-top: 40px;
        margin-bottom: 20px;
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        gap: 10px;
    }
    @media screen and (max-width: 768px) {
        #buttons {
            margin-top: 10px;
        }
        #statement {
            font-size: 1.2em;
            line-height: 1.5em;
        }
    }
  </style>

</head>
<body>
    <div id="landing">
    <h1 id="title">Goodbye Warden</h1>
    <p>597 Death Row inmates have been executed in Texas since 1982.<br/><br />These are their last words.</p>
        <button onclick="activateSite()">→</button>
</div>
<div id="content" style="display: none;">
        <!-- <h1 id="title" style="color: transparent;">Goodbye Warden</h1> -->
    <div id="buttons">
        <button id="previousButton" style="display: none;" onclick="getStatement(false)">←</button>
        <button id="aboutButton" style="display: none;" onclick="window.location.href='about.html'">About</button>
        <button id="nextButton" style="display: none;" onclick="getStatement(true)">→</button>
    </div>
      <div id="statement"></div>
      <p id="name"></p>
    </div>

<script>

    const activateSite = () => {
        document.getElementById('content').style.display = 'flex';
        document.getElementById('landing').style.display = 'none';
        document.getElementById('previousButton').style.display = 'inline-block';
        document.getElementById('nextButton').style.display = 'inline-block';
        document.getElementById('aboutButton').style.display = 'inline-block';
    }

    let firstTime = true;
    let startIndex = Math.floor(Math.random() * allStatements.length);
    let count = 0;
    const getStatement = (forwards = true) => {
            count++;

            // move once in the requested direction
            startIndex += forwards ? 1 : -1;

            // wrap immediately
            if (startIndex >= allStatements.length) startIndex = 0;
            if (startIndex < 0) startIndex = allStatements.length - 1;

            let attempts = 0;
            let idx = startIndex;

            // search for the next valid statement (bounded)
            while (attempts < allStatements.length) {
                const item = allStatements[idx];
                if (!item || !item.statement) break;

                const text = item.statement;

                // filtering rules
                if (firstTime && text.includes('declined to make')) {
                    // reject
                } else if (count < 10 && text.includes('declined')) {
                    // reject
                } else if ((count < 3 && text.length > 300) || (count < 10 && text.length < 100)) {
                    // reject
                } else {
                    // ✅ valid
                    startIndex = idx;
                    break;
                }

                // advance
                idx += forwards ? 1 : -1;

                // wrap
                if (idx >= allStatements.length) idx = 0;
                if (idx < 0) idx = allStatements.length - 1;

                attempts++;
            }

            console.log('getStatement', startIndex, forwards);

            const statementEl = document.getElementById('statement');
            const nameEl = document.getElementById('name');

            // reset animation
            statementEl.classList.remove('fade-up-in');
            nameEl.classList.remove('fade-up-in');
            void statementEl.offsetWidth;

            const current = allStatements[startIndex];

            // render
            statementEl.innerHTML = current.statement.replace(/\n/g, '<br/><br/>');
            nameEl.innerHTML = `<i>- ${current.firstName}<br/><br/><br/><br/></i>`;

            // animate
            statementEl.classList.add('fade-up-in');
            nameEl.classList.add('fade-up-in');

            firstTime = false;
        };


    getStatement();
    
</script>
</body>
</html>
