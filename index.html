<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Goodbye Warden</title>
  <script src="all_words_with_statements.js"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link
    href="https://fonts.googleapis.com/css2?family=Fauna+One&family=Funnel+Sans:ital,wght@0,300..800;1,300..800&display=swap"
    rel="stylesheet">
  <style>
    body {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        height: 98vh;
        width: 98vw;
        background-color: #2B2C33;
        color: #ffffff;
        font-family: 'Funnel Sans', 'Arial', sans-serif;
        overflow-x: hidden;
    }

    #content {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: space-between;
        height: 80%;
        /* max-height: 80%; */
        width: 80%;
        padding-bottom: 30px;
    }
    #statement {
        /* max-height: 80%; */
        /* overflow-y: auto; */
        font-size: 1.3rem;
        max-width: 100%;
        letter-spacing: 0.1px;
        line-height: 2rem;
    }

    #name {
        font-size: 1.2rem;
        max-width: 100%;
    }
    
    @keyframes fadeUpIn {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    .fade-up-in {
        animation: fadeUpIn 0.5s ease-out;
    }
    #landing {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        height: 100%;
        width: 100%;
        font-size: 1.2rem;
    }
    button {
        background-color: #2B2C33;
        color: #ffffff;
        border: 1px solid #ffffff;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-family: 'Funnel Sans', 'Arial', sans-serif;
        font-size: 1.2rem;
        transition: background-color 0.2s, transform 0.1s;
    }

    #buttons {
        margin-top: 40px;
        margin-bottom: 20px;
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        gap: 10px;
    }
  </style>

</head>
<body>
    <div id="landing">
    <h1 id="title">Goodbye Warden</h1>
    <p>597 Death Row inmates have been executed in Texas since 1982.<br/><br />These are their last words.</p>
        <button onclick="activateSite()">→</button>
</div>
<div id="content" style="display: none;">
        <!-- <h1 id="title" style="color: transparent;">Goodbye Warden</h1> -->
    <div id="buttons">
        <button id="previousButton" style="display: none;" onclick="getStatement(false)">←</button>
        <button id="aboutButton" style="display: none;" onclick="window.location.href='about.html'">About</button>
        <button id="nextButton" style="display: none;" onclick="getStatement(true)">→</button>
    </div>
      <div id="statement"></div>
      <p id="name"></p>
    </div>

<script>

    const activateSite = () => {
        document.getElementById('content').style.display = 'flex';
        document.getElementById('landing').style.display = 'none';
        document.getElementById('previousButton').style.display = 'inline-block';
        document.getElementById('nextButton').style.display = 'inline-block';
        document.getElementById('aboutButton').style.display = 'inline-block';
    }

    let firstTime = true;
    let startIndex = Math.floor(Math.random() * allStatements.length);
    let count = 0;
    const getStatement = (forwards = true) => {
        count++;
        //fwd or back
        if (forwards) {
            startIndex++;
        } else {
            startIndex--;
        }
         
        //controlling for no statement
        if (firstTime) {
            while (allStatements[startIndex].statement.includes('declined to make')) {
                startIndex = Math.floor(Math.random() * allStatements.length);
            }
        }
        if (count < 10 && allStatements[startIndex].statement.includes('declined to make')) {
             while (allStatements[startIndex].statement.includes('declined to make')) {
                forwards ? startIndex++ : startIndex--;
            }
        }
        if (count < 3 && allStatements[startIndex].statement.length > 1000) {
             while (allStatements[startIndex].statement.length > 1000) {
                forwards ? startIndex++ : startIndex--;
            }
        }


        if (startIndex >= allStatements.length) {
            forwards = false;
            startIndex = 0;
        }
        if (startIndex < 0) {
            forwards = true;
            startIndex = allStatements.length - 1;
        }
        console.log('getStatement', startIndex, forwards);

        const statement = document.getElementById('statement');
        const name = document.getElementById('name');
        //const link = document.getElementById('link');
        if (firstTime) {
            while(allStatements[startIndex].statement.includes('declined to make')) {
                startIndex = Math.floor(Math.random() * allStatements.length);
            }
        }
        
        // Remove animation class to reset
        statement.classList.remove('fade-up-in');
        name.classList.remove('fade-up-in');
        
        // Force reflow to ensure class removal is processed
        void statement.offsetWidth;
        
        // Update content
        statement.innerHTML = allStatements[startIndex].statement.replace(/\n/g, '<br/><br/>');
        name.innerHTML = "<i>- " + allStatements[startIndex].firstName + "<br/><br/><br/><br/></i>";
        //link.innerHTML = "<a href='" + allStatements[startIndex].link + "'>View on TDCJ</a>";
        
        // Add animation class to trigger fade up + in
        statement.classList.add('fade-up-in');
        name.classList.add('fade-up-in');

        firstTime = false;
    }
    getStatement();
    
</script>
</body>
</html>
